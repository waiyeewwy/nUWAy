{% extends "adminbase.html" %}

{% block content %}

<h2 class="pagetitle">Team</h2>

<div class="container-holder">
    <div class="container-fluid text-center" id="container">
        <div class="row">
            <div class="col-3 d-flex text-center">
                <h6 style="margin:auto">Id</h6>
            </div>
            <div class="col-3 d-flex text-center">
                <h6 style="margin:auto">Name</h6>
            </div>
            <div class="col-3 d-flex text-center">
                <h6 style="margin:auto">Email</h6>
            </div>
            <div class="col-3 d-flex text-center">
                <h6 style="margin:auto">Action</h6>
            </div>
        </div>
    
    
        {% for mate in mates %}

        <div id={{mate.id}} class="row">
            {% if mate.approved is sameas True %}
            <div class="col-3 d-flex text-center">
                <p style="margin:auto;">{{mate.id}}</p>
            </div>
            <div class="col-3 d-flex text-center">
                <p style="margin:auto;">{{mate.name}}</p>
            </div>
            <div class="col-3 d-flex text-center">
                <p style="margin:auto;">{{mate.email}}</p>
            </div>
            <div class="col-3 d-flex text-center">
                <p style="margin:auto">
                    <button class="btn btn-success" style="font-size:10px" onclick="leaveTeam('{{mate.id}}')">Leave Team</button>
                </p>
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>

<script>
    function leaveTeam(id){
        //removing user on front end using DOM
        removeUser = document.getElementById(id)
        parent = document.getElementById('container')
        parent.removeChild(removeUser)

        var target = JSON.stringify(id)
        $.ajax({
            url: 'leaveTeam',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(target)
        })
    }
</script>

{% endblock %}